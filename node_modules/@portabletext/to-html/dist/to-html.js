"use strict";var O=Object.defineProperty,U=Object.defineProperties;var W=Object.getOwnPropertyDescriptors;var T=Object.getOwnPropertySymbols;var _=Object.prototype.hasOwnProperty,B=Object.prototype.propertyIsEnumerable;var M=(t,n,e)=>n in t?O(t,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[n]=e,$=(t,n)=>{for(var e in n||(n={}))_.call(n,e)&&M(t,e,n[e]);if(T)for(var e of T(n))B.call(n,e)&&M(t,e,n[e]);return t},L=(t,n)=>U(t,W(n));var x=(t,n)=>{var e={};for(var r in t)_.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&T)for(var r of T(t))n.indexOf(r)<0&&B.call(t,r)&&(e[r]=t[r]);return e};Object.defineProperty(exports,"__esModule",{value:!0});exports[Symbol.toStringTag]="Module";var m=require("@portabletext/toolkit");const j=["http","https","mailto","tel"],C={"&":"amp","<":"lt",">":"gt",'"':"quot","'":"#x27"};function g(t){return t.replace(/[&<>"']/g,n=>`&${C[n]};`)}function D(t){const n=(t||"").trim(),e=n.charAt(0);if(e==="#"||e==="/")return!0;const r=n.indexOf(":");if(r===-1)return!0;const c=n.slice(0,r).toLowerCase();if(j.indexOf(c)!==-1)return!0;const p=n.indexOf("?");if(p!==-1&&r>p)return!0;const k=n.indexOf("#");return k!==-1&&r>k}const A=({children:t,value:n})=>{const e=(n==null?void 0:n.href)||"";return D(e)?`<a href="${g(e)}">${t}</a>`:t},z={em:({children:t})=>`<em>${t}</em>`,strong:({children:t})=>`<strong>${t}</strong>`,code:({children:t})=>`<code>${t}</code>`,underline:({children:t})=>`<span style="text-decoration:underline">${t}</span>`,"strike-through":({children:t})=>`<del>${t}</del>`,link:A},K={number:({children:t})=>`<ol>${t}</ol>`,bullet:({children:t})=>`<ul>${t}</ul>`},R=({children:t})=>`<li>${t}</li>`,I=(t,n)=>`Unknown ${t}, specify a component for it in the \`components.${n}\` option`,P=t=>I(`block type "${t}"`,"types"),V=t=>I(`mark type "${t}"`,"marks"),E=t=>I(`block style "${t}"`,"block"),F=t=>I(`list style "${t}"`,"list"),G=t=>I(`list item style "${t}"`,"listItem");function J(t){console.warn(t)}const Q=({value:t,isInline:n})=>{const e=P(t._type);return n?`<span style="display:none">${e}</span>`:`<div style="display:none">${e}</div>`},X=({markType:t,children:n})=>`<span class="unknown__pt__mark__${t}">${n}</span>`,Y=({children:t})=>`<p>${t}</p>`,Z=({children:t})=>`<ul>${t}</ul>`,v=({children:t})=>`<li>${t}</li>`,tt=()=>"<br/>",nt={normal:({children:t})=>`<p>${t}</p>`,blockquote:({children:t})=>`<blockquote>${t}</blockquote>`,h1:({children:t})=>`<h1>${t}</h1>`,h2:({children:t})=>`<h2>${t}</h2>`,h3:({children:t})=>`<h3>${t}</h3>`,h4:({children:t})=>`<h4>${t}</h4>`,h5:({children:t})=>`<h5>${t}</h5>`,h6:({children:t})=>`<h6>${t}</h6>`},S={types:{},block:nt,marks:z,list:K,listItem:R,hardBreak:tt,unknownType:Q,unknownMark:X,unknownList:Z,unknownListItem:v,unknownBlockStyle:Y};function H(t,n){const f=n,{block:e,list:r,listItem:c,marks:p,types:k}=f,h=x(f,["block","list","listItem","marks","types"]);return $(L($({},t),{block:w(t,n,"block"),list:w(t,n,"list"),listItem:w(t,n,"listItem"),marks:w(t,n,"marks"),types:w(t,n,"types")}),h)}function w(t,n,e){const r=n[e],c=t[e];return typeof r=="function"||r&&typeof c=="function"?r:r?$($({},c),r):c}function et(t,n={}){const{components:e,onMissingComponent:r=J}=n,c=r||rt,p=Array.isArray(t)?t:[t],k=m.nestLists(p,"html"),h=e?H(S,e):S,f=ot(h,c);return k.map((o,l)=>f({node:o,index:l,isInline:!1,renderNode:f})).join("")}const ot=(t,n)=>{function e(s){const{node:o,index:l,isInline:i}=s;return m.isPortableTextToolkitList(o)?c(o,l):m.isPortableTextListItemBlock(o)?r(o,l):m.isPortableTextToolkitSpan(o)?p(o):m.isPortableTextBlock(o)?k(o,l,i):m.isPortableTextToolkitTextNode(o)?h(o):f(o,l,i)}function r(s,o){const l=q({node:s,index:o,isInline:!1,renderNode:e}),i=t.listItem,a=(typeof i=="function"?i:i[s.listItem])||t.unknownListItem;if(a===t.unknownListItem){const b=s.listItem||"bullet";n(G(b),{type:b,nodeType:"listItemStyle"})}let u=l.children;if(s.style&&s.style!=="normal"){const d=s,{listItem:b}=d,N=x(d,["listItem"]);u=e({node:N,index:o,isInline:!1,renderNode:e})}return a({value:s,index:o,isInline:!1,renderNode:e,children:u})}function c(s,o){const l=s.children.map((u,d)=>e({node:u._key?u:L($({},u),{_key:`li-${o}-${d}`}),index:o,isInline:!1,renderNode:e})),i=t.list,a=(typeof i=="function"?i:i[s.listItem])||t.unknownList;if(a===t.unknownList){const u=s.listItem||"bullet";n(F(u),{nodeType:"listStyle",type:u})}return a({value:s,index:o,isInline:!1,renderNode:e,children:l.join("")})}function p(s){const{markDef:o,markType:l,markKey:i}=s,y=t.marks[l]||t.unknownMark,a=s.children.map((u,d)=>e({node:u,index:d,isInline:!0,renderNode:e}));return y===t.unknownMark&&n(V(l),{nodeType:"mark",type:l}),y({text:m.spanToPlainText(s),value:o,markType:l,markKey:i,renderNode:e,children:a.join("")})}function k(s,o,l){const b=q({node:s,index:o,isInline:l,renderNode:e}),{_key:i}=b,y=x(b,["_key"]),a=y.node.style||"normal",d=(typeof t.block=="function"?t.block:t.block[a])||t.unknownBlockStyle;return d===t.unknownBlockStyle&&n(E(a),{nodeType:"blockStyle",type:a}),d(L($({},y),{value:y.node,renderNode:e}))}function h(s){if(s.text===`
`){const o=t.hardBreak;return o?o():`
`}return g(s.text)}function f(s,o,l){const i=t.types[s._type];return i||n(P(s._type),{nodeType:"block",type:s._type}),(i||t.unknownType)({value:s,isInline:l,index:o,renderNode:e})}return e};function q(t){const{node:n,index:e,isInline:r,renderNode:c}=t,k=m.buildMarksTree(n).map((h,f)=>c({node:h,isInline:!0,index:f,renderNode:c}));return{_key:n._key||`block-${e}`,children:k.join(""),index:e,isInline:r,node:n}}function rt(){}exports.defaultComponents=S;exports.escapeHTML=g;exports.mergeComponents=H;exports.toHTML=et;exports.uriLooksSafe=D;
//# sourceMappingURL=to-html.js.map
